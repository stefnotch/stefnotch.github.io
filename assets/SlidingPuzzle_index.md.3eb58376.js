import{d as T,r as x,k as E,a as p,c as d,b as v,F as S,l as P,t as z,f as V,m as b,g as I,h as C,i as R}from"./app.c56f9413.js";const j={key:0,style:{position:"absolute",transform:"translate(0%, -50%)","text-align":"center"}},L=V(" Solution in an arcane language understood by computer-wizards: "),q=T({name:"SlidingPuzzle",setup(k){const s={Empty:0,Stone:1,Goal:2},c=x(B(10,10)),f=x(G(c.value)),y=E(()=>({x:f.value.x,y:f.value.y})),g=x([]);(async()=>{for(;!A(c.value);)await new Promise(o=>setTimeout(o,0))})();function B(e,o){if(e<3||o<3)throw new Error("Board must have at least 3x3 cells");const n=[];for(let t=0;t<o;t++){const r=[];for(let l=0;l<e;l++)t<=0||l<=0||t>=o-1||l>=e-1?r.push(s.Stone):r.push(s.Empty);n.push(r)}return n[o-1][e-2]=s.Empty,n}function A(e){const o=e.length,n=e[0].length;let t=Math.floor(Math.random()*(n*o)/3);for(;t>0;){for(let r=0;r<2;r++){const l=F(e),i=Math.floor(Math.random()*(n-2))+1,w=Math.floor(Math.random()*(o-2))+1;l[w][i]=s.Goal;for(let a=0;a<t;a++){const u=Math.floor(Math.random()*(n-2))+1,M=Math.floor(Math.random()*(o-2))+1;l[M][u]===s.Empty?l[M][u]=s.Stone:Math.random()>.5&&a--}const m=D(l);if(m!=null){$(l,e);let a=m;for(;a!=null;){g.value.unshift({index:0,position:a.position});for(let u=g.value.length-1;u>0;u--)g.value[u].index=u;a=a.previous}return!0}}t-=1}return console.log("Oh no, it failed. Retrying...?"),!1}function F(e){return e.map(o=>o.slice())}function $(e,o){for(let n=0;n<e.length;n++)for(let t=0;t<e[n].length;t++)o[n][t]=e[n][t]}function D(e){const o=new Set,n=i=>{o.add(`${i.x},${i.y}`)},t=i=>o.has(`${i.x},${i.y}`),r=[],l=[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:0,y:1}];for(n(y.value),l.forEach(i=>{r.push({position:y.value,direction:i,previous:null})});r.length>0;){const i=r.shift(),{position:w,direction:m}=i,a=h(w,m,e);if(e[a.y][a.x]===s.Goal)return{position:a,direction:m,previous:i};t(a)||(n(a),l.forEach(u=>{r.push({position:a,direction:u,previous:i})}))}return null}function G(e){const o=e.length,n=e[0].length,t={y:x(o-1),x:x(n-2),cell:E(()=>e[t.y.value][t.x.value])};if(t.cell.value===s.Stone)throw new Error("Player cannot start on a stone");return t}function h(e,o,n){for(;;){const t={x:e.x+o.x,y:e.y+o.y};if(t.x<0||t.x>=n[0].length||t.y<0||t.y>=n.length||n[t.y][t.x]===s.Stone)return e;e=t}}function _(e){f.value.x=e.x,f.value.y=e.y}function N(e){if(e===s.Empty)return" ";if(e===s.Stone)return"\u26F0";if(e===s.Goal)return"\u{1F41F}"}function O(e){e.code=="ArrowUp"?(console.log("up"),_(h(y.value,{x:0,y:-1},c.value))):e.code=="ArrowDown"?(console.log("down"),_(h(y.value,{x:0,y:1},c.value))):e.code=="ArrowLeft"?(console.log("left"),_(h(y.value,{x:-1,y:0},c.value))):e.code=="ArrowRight"&&(console.log("right"),_(h(y.value,{x:1,y:0},c.value)))}return(e,o)=>(p(),d(S,null,[v("table",{tabIndex:0,className:"game-table",onKeydown:o[0]||(o[0]=n=>O(n))},[v("tbody",null,[(p(!0),d(S,null,P(c.value,(n,t)=>(p(),d("tr",null,[(p(!0),d(S,null,P(n,(r,l)=>(p(),d("td",null,[v("span",null,z(N(r)),1),l==f.value.x&&t==f.value.y?(p(),d("span",j,"\u{1F408}")):b("",!0)]))),256))]))),256))])],32),L,v("pre",null,z(g.value),1)],64))}}),K=v("p",null,"A cute little sliding puzzle game. Solveable in polynomial time.",-1),X='{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"SlidingPuzzle/index.md"}',U={},Y=Object.assign(U,{name:"index",setup(k){return(s,c)=>{const f=I("ClientOnly");return p(),d("div",null,[K,C(f,null,{default:R(()=>[C(q)]),_:1})])}}});export{X as __pageData,Y as default};
